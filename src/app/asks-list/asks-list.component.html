<div class="row">
  <h2 class="mb-5">
    Toutes les dernières demandes de permutations
  </h2>
  <div id="myAsks">
    <label for="myAsks">Cacher mes demandes</label>
    <input 
    id="my"
    type="checkbox" 
    name="myAsks"
    (click)="Hide($event.target.checked)">
  </div>
  <p 
  *ngIf='asks === undefined'
  class="row col-12 btn-info disabled">
    Il n'y a pas encore de demandes de permutation
  </p>
  <table 
  [mfData]="data" #mf="mfDataTable"
  [mfRowsOnPage]="8"
  class="mb-5 table table-hover">
    <thead class="head">
      <tr (click)='Hide(is)'>
        <th class="pb-2 ">
          <mfDefaultSorter 
          by="rest" 
          onclick='Sort(this)'
          >
           Repos
           <i class="fas fa-arrow-down down"></i>
           <i class="fas fa-arrow-up up hide"></i>
          </mfDefaultSorter> 
        </th>
        <th class="pb-2"> 
          <mfDefaultSorter 
          by="user.registrationNumber"
          onclick='Sort(this)'>
            Matricule
            <i class="fas fa-arrow-down down"></i>
            <i class="fas fa-arrow-up hide up"></i>
          </mfDefaultSorter>
        </th>
        <th class="pb-2 "> 
          <mfDefaultSorter 
          by="type"
          onclick='Sort(this)'>
            Proposé
            <i class="fas fa-arrow-down down"></i>
            <i class="fas fa-arrow-up up hide"></i>
          </mfDefaultSorter>
        </th>
        <th class="pb-2 " > 
          <mfDefaultSorter onclick='Sort(this)'>
            Souhaité
          </mfDefaultSorter>
        </th>
        <th class="pb-2 "> 
          <mfDefaultSorter onclick='Sort(this)'>
            Equipe
          </mfDefaultSorter>
        </th>
        <th class="pb-2 "> 
          <mfDefaultSorter onclick='Sort(this)'>
            Début
          </mfDefaultSorter>
        </th>
        <th class="pb-2 "> 
          <mfDefaultSorter onclick='Sort(this)'>
            Fin
          </mfDefaultSorter>
        </th>
        <th class="pb-2 "> 
          <mfDefaultSorter onclick='Sort(this)'>
            Action
          </mfDefaultSorter>
        </th>
      </tr>
    </thead>
    <tbody *ngFor="let ask of mf.data; let i = index">
        <tr
        *ngIf="IsMyOffers(ask)"
        class="{{(ask.user.email == user.email) ? 'is' : 'not'}}"
        [ngStyle]="{ 'background-color' : getColor(ask) }">
          <td data-label="Repos"> {{ ask.rest }} </td>
          <td data-label="Matricule"> {{ ask.user.registrationNumber }} </td>
          <td data-label="Proposé"> {{ ask.type }} </td>
          <td data-label="Souhaité"> 
            {{ ask.typeVs.nuit == true ? "Nuit" : '' }} 
            {{ ask.typeVs.jour == true ? "Jour" : '' }}   
            {{ ask.typeVs.mixte == true ? "Mixte" : '' }}   
          </td>
          <td data-label="Equipe"> {{ ask.teamNb }} </td>
          <td data-label="Début"> {{ ask.start }} </td>
          <td data-label="Fin"> {{ ask.end }} </td>
          <td 
          data-label="Action">
            <button 
            class="ok ml-1"
            *ngIf='ask.user.email !== user.email'
            data-toggle="modal"
            [attr.data-target]="'#'+ (mf.rowsOnPage*pageIndex + (asks.length-1-i))"
            data-whatever="@mdo"
            title="Proposer un accord"
            > 
              <i class="fas fa-handshake"></i>
            </button>
          </td>
        </tr>
        <tr
        title="Vous avez proposé un accord pour cette demande" 
        *ngIf="!IsMyOffers(ask)"
        class="isSend">
          <td data-label="Repos"> {{ ask.rest }} </td>
          <td data-label="Matricule"> {{ ask.user.registrationNumber }} </td>
          <td data-label="Proposé"> {{ ask.type }} </td>
          <td data-label="Souhaité"> 
            {{ ask.typeVs.nuit == true ? "Nuit" : '' }} 
            {{ ask.typeVs.jour == true ? "Jour" : '' }}   
            {{ ask.typeVs.mixte == true ? "Mixte" : '' }}   
          </td>
          <td data-label="Equipe"> {{ ask.teamNb }} </td>
          <td data-label="Début"> {{ ask.start }} </td>
          <td data-label="Fin"> {{ ask.end }} </td>
          <td data-label="Action">
            <i class="fas send fa-paper-plane"></i>
          </td>
        </tr>
      <app-offer [asks]="asks" [ask]="ask" [i]='mf.rowsOnPage*pageIndex + (asks.length-1-i)' [user]="user"></app-offer>
      <script src='assets/modal.js'></script>
    </tbody>
    <tfoot>
      <tr (click)="Hide(is)">
          <td id='pagination' colspan="4">
            <mfBootstrapPaginator (click)="onChangePage(mf)"></mfBootstrapPaginator>
          </td>
      </tr>
  </tfoot>
  </table>
</div>
